'use strict';var cov_25zos0b7nh=function(){var path="/home/sami/Documents/elint-retraced/github101/src/addAnAnswer.js";var hash="256d25add379d9a25f063175cafea6a0a1069d07";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/sami/Documents/elint-retraced/github101/src/addAnAnswer.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:12},end:{line:7,column:29}},"2":{start:{line:9,column:13},end:{line:9,column:42}},"3":{start:{line:11,column:39},end:{line:11,column:93}},"4":{start:{line:13,column:11},end:{line:13,column:30}},"5":{start:{line:15,column:18},end:{line:61,column:1}},"6":{start:{line:17,column:13},end:{line:17,column:48}},"7":{start:{line:19,column:4},end:{line:60,column:7}},"8":{start:{line:21,column:29},end:{line:21,column:62}},"9":{start:{line:22,column:8},end:{line:22,column:46}},"10":{start:{line:24,column:8},end:{line:24,column:142}},"11":{start:{line:26,column:8},end:{line:59,column:11}},"12":{start:{line:27,column:31},end:{line:27,column:53}},"13":{start:{line:29,column:12},end:{line:58,column:13}},"14":{start:{line:30,column:32},end:{line:38,column:17}},"15":{start:{line:40,column:16},end:{line:40,column:45}},"16":{start:{line:42,column:16},end:{line:57,column:19}},"17":{start:{line:44,column:20},end:{line:56,column:21}},"18":{start:{line:45,column:24},end:{line:50,column:27}},"19":{start:{line:52,column:24},end:{line:55,column:27}},"20":{start:{line:63,column:0},end:{line:63,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:11,column:95}},line:11},"1":{name:"addAnAnswer",decl:{start:{line:15,column:27},end:{line:15,column:38}},loc:{start:{line:15,column:49},end:{line:61,column:1}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:19,column:83},end:{line:19,column:84}},loc:{start:{line:19,column:103},end:{line:60,column:5}},line:19},"3":{name:"(anonymous_3)",decl:{start:{line:24,column:109},end:{line:24,column:110}},loc:{start:{line:24,column:138},end:{line:24,column:140}},line:24},"4":{name:"(anonymous_4)",decl:{start:{line:26,column:70},end:{line:26,column:71}},loc:{start:{line:26,column:93},end:{line:59,column:9}},line:26},"5":{name:"(anonymous_5)",decl:{start:{line:42,column:98},end:{line:42,column:99}},loc:{start:{line:42,column:124},end:{line:57,column:17}},line:42}},branchMap:{"0":{loc:{start:{line:11,column:46},end:{line:11,column:92}},type:"cond-expr",locations:[{start:{line:11,column:70},end:{line:11,column:73}},{start:{line:11,column:76},end:{line:11,column:92}}],line:11},"1":{loc:{start:{line:11,column:46},end:{line:11,column:67}},type:"binary-expr",locations:[{start:{line:11,column:46},end:{line:11,column:49}},{start:{line:11,column:53},end:{line:11,column:67}}],line:11},"2":{loc:{start:{line:29,column:12},end:{line:58,column:13}},type:"if",locations:[{start:{line:29,column:12},end:{line:58,column:13}},{start:{line:29,column:12},end:{line:58,column:13}}],line:29},"3":{loc:{start:{line:44,column:20},end:{line:56,column:21}},type:"if",locations:[{start:{line:44,column:20},end:{line:56,column:21}},{start:{line:44,column:20},end:{line:56,column:21}}],line:44}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_25zos0b7nh.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _user=(cov_25zos0b7nh.s[1]++,require('./user'));var _user2=(cov_25zos0b7nh.s[2]++,_interopRequireDefault(_user));function _interopRequireDefault(obj){cov_25zos0b7nh.f[0]++;cov_25zos0b7nh.s[3]++;return(cov_25zos0b7nh.b[1][0]++,obj)&&(cov_25zos0b7nh.b[1][1]++,obj.__esModule)?(cov_25zos0b7nh.b[0][0]++,obj):(cov_25zos0b7nh.b[0][1]++,{default:obj});}var pool=(cov_25zos0b7nh.s[4]++,_user2.default.pool);cov_25zos0b7nh.s[5]++;var addAnAnswer=function addAnAnswer(req,res){cov_25zos0b7nh.f[1]++;var id=(cov_25zos0b7nh.s[6]++,parseInt(req.params.questionId,10));cov_25zos0b7nh.s[7]++;pool.query('SELECT answers FROM users WHERE username=$1',[req.body.username],function(err,ans){cov_25zos0b7nh.f[2]++;var ansContributed=(cov_25zos0b7nh.s[8]++,parseInt(ans.rows[0].answers)+1);cov_25zos0b7nh.s[9]++;res.cookie("answers",ansContributed);cov_25zos0b7nh.s[10]++;pool.query('UPDATE users SET answers = $1 WHERE username = $2',[ansContributed,req.body.username],function(error,ansUpdated){cov_25zos0b7nh.f[3]++;});cov_25zos0b7nh.s[11]++;pool.query('SELECT answers FROM questions WHERE id=$1',[id],function(err,result){cov_25zos0b7nh.f[4]++;var answersArray=(cov_25zos0b7nh.s[12]++,result.rows[0].answers);cov_25zos0b7nh.s[13]++;if(result){cov_25zos0b7nh.b[2][0]++;var newAnswer=(cov_25zos0b7nh.s[14]++,{id:answersArray.length+1,user:req.body.username,answer:req.body.answer,upVotes:[],downVotes:[],reply:[],time:new Date()});cov_25zos0b7nh.s[15]++;answersArray.push(newAnswer);cov_25zos0b7nh.s[16]++;pool.query('UPDATE questions SET answers = $1 WHERE id = $2',[answersArray,id],function(error,results){cov_25zos0b7nh.f[5]++;cov_25zos0b7nh.s[17]++;if(result){cov_25zos0b7nh.b[3][0]++;cov_25zos0b7nh.s[18]++;return res.status(201).send({success:'true',message:'New Answer added successfully',answers:newAnswer,ansContributed:ansContributed});}else{cov_25zos0b7nh.b[3][1]++;cov_25zos0b7nh.s[19]++;return res.status(401).send({success:'false',message:'An error occured, please try again'});}});}else{cov_25zos0b7nh.b[2][1]++;}});});};cov_25zos0b7nh.s[20]++;exports.default=addAnAnswer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZEFuQW5zd2VyLmpzIl0sIm5hbWVzIjpbInBvb2wiLCJ1c2VyIiwiYWRkQW5BbnN3ZXIiLCJyZXEiLCJyZXMiLCJpZCIsInBhcnNlSW50IiwicGFyYW1zIiwicXVlc3Rpb25JZCIsInF1ZXJ5IiwiYm9keSIsInVzZXJuYW1lIiwiZXJyIiwiYW5zIiwiYW5zQ29udHJpYnV0ZWQiLCJyb3dzIiwiYW5zd2VycyIsImNvb2tpZSIsImVycm9yIiwiYW5zVXBkYXRlZCIsInJlc3VsdCIsImFuc3dlcnNBcnJheSIsIm5ld0Fuc3dlciIsImxlbmd0aCIsImFuc3dlciIsInVwVm90ZXMiLCJkb3duVm90ZXMiLCJyZXBseSIsInRpbWUiLCJEYXRlIiwicHVzaCIsInJlc3VsdHMiLCJzdGF0dXMiLCJzZW5kIiwic3VjY2VzcyIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7QUFFQSxJQUFNQSxPQUFPQyxlQUFLRCxJQUFsQjs7QUFHQSxJQUFNRSxjQUFjLFNBQWRBLFdBQWMsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7O0FBRzlCLFFBQU1DLEtBQUtDLFNBQVNILElBQUlJLE1BQUosQ0FBV0MsVUFBcEIsRUFBZ0MsRUFBaEMsQ0FBWDs7QUFFQVIsU0FBS1MsS0FBTCxDQUFXLDZDQUFYLEVBQTBELENBQUNOLElBQUlPLElBQUosQ0FBU0MsUUFBVixDQUExRCxFQUErRSxVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBWTs7QUFFdkYsWUFBSUMsaUJBQWlCUixTQUFTTyxJQUFJRSxJQUFKLENBQVMsQ0FBVCxFQUFZQyxPQUFyQixJQUFnQyxDQUFyRDtBQUNBWixZQUFJYSxNQUFKLENBQVcsU0FBWCxFQUFzQkgsY0FBdEI7O0FBR0FkLGFBQUtTLEtBQUwsQ0FBVyxtREFBWCxFQUFnRSxDQUFDSyxjQUFELEVBQWlCWCxJQUFJTyxJQUFKLENBQVNDLFFBQTFCLENBQWhFLEVBQXFHLFVBQUNPLEtBQUQsRUFBUUMsVUFBUixFQUF1QixDQUMzSCxDQUREOztBQUtSbkIsYUFBS1MsS0FBTCxDQUFXLDJDQUFYLEVBQXdELENBQUNKLEVBQUQsQ0FBeEQsRUFBOEQsVUFBQ08sR0FBRCxFQUFNUSxNQUFOLEVBQWU7QUFDekUsZ0JBQU1DLGVBQWVELE9BQU9MLElBQVAsQ0FBWSxDQUFaLEVBQWVDLE9BQXBDOztBQUVJLGdCQUFHSSxNQUFILEVBQVU7QUFDTixvQkFBTUUsWUFBWTtBQUNkakIsd0JBQUlnQixhQUFhRSxNQUFiLEdBQXNCLENBRFo7QUFFZHRCLDBCQUFNRSxJQUFJTyxJQUFKLENBQVNDLFFBRkQ7QUFHZGEsNEJBQVFyQixJQUFJTyxJQUFKLENBQVNjLE1BSEg7QUFJZEMsNkJBQVMsRUFKSztBQUtkQywrQkFBVSxFQUxJO0FBTWRDLDJCQUFPLEVBTk87QUFPZEMsMEJBQU0sSUFBSUMsSUFBSjtBQVBRLGlCQUFsQjs7QUFVSVIsNkJBQWFTLElBQWIsQ0FBa0JSLFNBQWxCOztBQUdBdEIscUJBQUtTLEtBQUwsQ0FBVyxpREFBWCxFQUE4RCxDQUFDWSxZQUFELEVBQWVoQixFQUFmLENBQTlELEVBQWtGLFVBQUNhLEtBQUQsRUFBUWEsT0FBUixFQUFvQjs7QUFFdEcsd0JBQUdYLE1BQUgsRUFBVTtBQUNWLCtCQUFPaEIsSUFBSTRCLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUN4QkMscUNBQVMsTUFEZTtBQUV4QkMscUNBQVMsK0JBRmU7QUFHeEJuQixxQ0FBU00sU0FIZTtBQUl4QlIsNENBQWdCQTtBQUpRLHlCQUFyQixDQUFQO0FBTUMscUJBUEQsTUFPSztBQUNMLCtCQUFPVixJQUFJNEIsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ3hCQyw0Q0FEd0I7QUFFeEJDO0FBRndCLHlCQUFyQixDQUFQO0FBSUM7QUFDSixpQkFmRztBQWdCUDtBQUdKLFNBcENMO0FBcUNLLEtBaEREO0FBb0RILENBekREOztrQkEyRGVqQyxXIiwiZmlsZSI6ImFkZEFuQW5zd2VyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3NhbWkvRG9jdW1lbnRzL2VsaW50LXJldHJhY2VkL2dpdGh1YjEwMS9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdXNlciBmcm9tICcuL3VzZXInO1xyXG5cclxuY29uc3QgcG9vbCA9IHVzZXIucG9vbDtcclxuXHJcblxyXG5jb25zdCBhZGRBbkFuc3dlciA9IChyZXEsIHJlcykgPT4ge1xyXG4gXHJcblxyXG4gICAgY29uc3QgaWQgPSBwYXJzZUludChyZXEucGFyYW1zLnF1ZXN0aW9uSWQsIDEwKTtcclxuXHJcbiAgICBwb29sLnF1ZXJ5KCdTRUxFQ1QgYW5zd2VycyBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lPSQxJywgW3JlcS5ib2R5LnVzZXJuYW1lXSwgKGVyciwgYW5zKT0+e1xyXG5cclxuICAgICAgICBsZXQgYW5zQ29udHJpYnV0ZWQgPSBwYXJzZUludChhbnMucm93c1swXS5hbnN3ZXJzKSArIDE7XHJcbiAgICAgICAgcmVzLmNvb2tpZShcImFuc3dlcnNcIiwgYW5zQ29udHJpYnV0ZWQpO1xyXG4gICAgICAgXHJcbiAgICAgICBcclxuICAgICAgICBwb29sLnF1ZXJ5KCdVUERBVEUgdXNlcnMgU0VUIGFuc3dlcnMgPSAkMSBXSEVSRSB1c2VybmFtZSA9ICQyJywgW2Fuc0NvbnRyaWJ1dGVkLCByZXEuYm9keS51c2VybmFtZV0sIChlcnJvciwgYW5zVXBkYXRlZCkgPT4ge1xyXG4gICAgICAgIH0pXHJcblxyXG5cclxuXHJcbnBvb2wucXVlcnkoJ1NFTEVDVCBhbnN3ZXJzIEZST00gcXVlc3Rpb25zIFdIRVJFIGlkPSQxJywgW2lkXSwgKGVyciwgcmVzdWx0KT0+e1xyXG4gICAgY29uc3QgYW5zd2Vyc0FycmF5ID0gcmVzdWx0LnJvd3NbMF0uYW5zd2VycztcclxuXHJcbiAgICAgICAgaWYocmVzdWx0KXtcclxuICAgICAgICAgICAgY29uc3QgbmV3QW5zd2VyID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGFuc3dlcnNBcnJheS5sZW5ndGggKyAxLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogcmVxLmJvZHkudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICBhbnN3ZXI6IHJlcS5ib2R5LmFuc3dlcixcclxuICAgICAgICAgICAgICAgIHVwVm90ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgZG93blZvdGVzOltdLFxyXG4gICAgICAgICAgICAgICAgcmVwbHk6IFtdLFxyXG4gICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhbnN3ZXJzQXJyYXkucHVzaChuZXdBbnN3ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcG9vbC5xdWVyeSgnVVBEQVRFIHF1ZXN0aW9ucyBTRVQgYW5zd2VycyA9ICQxIFdIRVJFIGlkID0gJDInLCBbYW5zd2Vyc0FycmF5LCBpZF0sIChlcnJvciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICd0cnVlJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTmV3IEFuc3dlciBhZGRlZCBzdWNjZXNzZnVsbHknLCBcclxuICAgICAgICAgICAgICAgICAgICBhbnN3ZXJzOiBuZXdBbnN3ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5zQ29udHJpYnV0ZWQ6IGFuc0NvbnRyaWJ1dGVkXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBgZmFsc2VgLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBBbiBlcnJvciBvY2N1cmVkLCBwbGVhc2UgdHJ5IGFnYWluYFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFxyXG4gICAgfSlcclxuICAgIH0pXHJcblxyXG5cclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhZGRBbkFuc3dlcjsiXX0=