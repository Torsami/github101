'use strict';var cov_19b43gkacq=function(){var path="/home/sami/Documents/elint-retraced/github101/src/logIn.js";var hash="dfc10ad98babb3cad4c55f91c2aca50fe9aec787";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/sami/Documents/elint-retraced/github101/src/logIn.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:10},end:{line:7,column:23}},"2":{start:{line:9,column:11},end:{line:9,column:38}},"3":{start:{line:11,column:16},end:{line:11,column:35}},"4":{start:{line:13,column:17},end:{line:13,column:50}},"5":{start:{line:15,column:15},end:{line:15,column:33}},"6":{start:{line:17,column:16},end:{line:17,column:48}},"7":{start:{line:19,column:18},end:{line:19,column:40}},"8":{start:{line:21,column:19},end:{line:21,column:54}},"9":{start:{line:23,column:20},end:{line:23,column:43}},"10":{start:{line:25,column:21},end:{line:25,column:58}},"11":{start:{line:27,column:12},end:{line:27,column:29}},"12":{start:{line:29,column:13},end:{line:29,column:42}},"13":{start:{line:31,column:20},end:{line:31,column:44}},"14":{start:{line:33,column:21},end:{line:33,column:58}},"15":{start:{line:35,column:39},end:{line:35,column:93}},"16":{start:{line:37,column:11},end:{line:37,column:30}},"17":{start:{line:38,column:13},end:{line:38,column:34}},"18":{start:{line:40,column:10},end:{line:40,column:34}},"19":{start:{line:42,column:0},end:{line:42,column:37}},"20":{start:{line:43,column:0},end:{line:43,column:62}},"21":{start:{line:44,column:0},end:{line:44,column:37}},"22":{start:{line:45,column:0},end:{line:45,column:65}},"23":{start:{line:46,column:0},end:{line:46,column:39}},"24":{start:{line:48,column:12},end:{line:104,column:1}},"25":{start:{line:49,column:20},end:{line:49,column:28}},"26":{start:{line:50,column:16},end:{line:50,column:31}},"27":{start:{line:51,column:19},end:{line:51,column:37}},"28":{start:{line:54,column:4},end:{line:59,column:5}},"29":{start:{line:55,column:8},end:{line:58,column:11}},"30":{start:{line:61,column:4},end:{line:103,column:7}},"31":{start:{line:63,column:8},end:{line:102,column:9}},"32":{start:{line:65,column:12},end:{line:96,column:15}},"33":{start:{line:66,column:16},end:{line:71,column:17}},"34":{start:{line:67,column:20},end:{line:70,column:23}},"35":{start:{line:72,column:16},end:{line:95,column:17}},"36":{start:{line:73,column:32},end:{line:78,column:22}},"37":{start:{line:80,column:20},end:{line:80,column:68}},"38":{start:{line:81,column:20},end:{line:81,column:47}},"39":{start:{line:82,column:20},end:{line:82,column:66}},"40":{start:{line:85,column:20},end:{line:89,column:23}},"41":{start:{line:91,column:20},end:{line:94,column:23}},"42":{start:{line:98,column:12},end:{line:101,column:15}},"43":{start:{line:106,column:0},end:{line:106,column:24}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:35,column:9},end:{line:35,column:31}},loc:{start:{line:35,column:37},end:{line:35,column:95}},line:35},"1":{name:"logIn",decl:{start:{line:48,column:21},end:{line:48,column:26}},loc:{start:{line:48,column:43},end:{line:104,column:1}},line:48},"2":{name:"(anonymous_2)",decl:{start:{line:61,column:92},end:{line:61,column:93}},loc:{start:{line:61,column:115},end:{line:103,column:5}},line:61},"3":{name:"(anonymous_3)",decl:{start:{line:65,column:74},end:{line:65,column:75}},loc:{start:{line:65,column:99},end:{line:96,column:13}},line:65}},branchMap:{"0":{loc:{start:{line:35,column:46},end:{line:35,column:92}},type:"cond-expr",locations:[{start:{line:35,column:70},end:{line:35,column:73}},{start:{line:35,column:76},end:{line:35,column:92}}],line:35},"1":{loc:{start:{line:35,column:46},end:{line:35,column:67}},type:"binary-expr",locations:[{start:{line:35,column:46},end:{line:35,column:49}},{start:{line:35,column:53},end:{line:35,column:67}}],line:35},"2":{loc:{start:{line:54,column:4},end:{line:59,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:59,column:5}},{start:{line:54,column:4},end:{line:59,column:5}}],line:54},"3":{loc:{start:{line:54,column:8},end:{line:54,column:39}},type:"binary-expr",locations:[{start:{line:54,column:8},end:{line:54,column:20}},{start:{line:54,column:24},end:{line:54,column:39}}],line:54},"4":{loc:{start:{line:63,column:8},end:{line:102,column:9}},type:"if",locations:[{start:{line:63,column:8},end:{line:102,column:9}},{start:{line:63,column:8},end:{line:102,column:9}}],line:63},"5":{loc:{start:{line:66,column:16},end:{line:71,column:17}},type:"if",locations:[{start:{line:66,column:16},end:{line:71,column:17}},{start:{line:66,column:16},end:{line:71,column:17}}],line:66},"6":{loc:{start:{line:72,column:16},end:{line:95,column:17}},type:"if",locations:[{start:{line:72,column:16},end:{line:95,column:17}},{start:{line:72,column:16},end:{line:95,column:17}}],line:72}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_19b43gkacq.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _pg=(cov_19b43gkacq.s[1]++,require('pg'));var _pg2=(cov_19b43gkacq.s[2]++,_interopRequireDefault(_pg));var _bcryptjs=(cov_19b43gkacq.s[3]++,require('bcryptjs'));var _bcryptjs2=(cov_19b43gkacq.s[4]++,_interopRequireDefault(_bcryptjs));var _express=(cov_19b43gkacq.s[5]++,require('express'));var _express2=(cov_19b43gkacq.s[6]++,_interopRequireDefault(_express));var _bodyParser=(cov_19b43gkacq.s[7]++,require('body-parser'));var _bodyParser2=(cov_19b43gkacq.s[8]++,_interopRequireDefault(_bodyParser));var _jsonwebtoken=(cov_19b43gkacq.s[9]++,require('jsonwebtoken'));var _jsonwebtoken2=(cov_19b43gkacq.s[10]++,_interopRequireDefault(_jsonwebtoken));var _user=(cov_19b43gkacq.s[11]++,require('./user'));var _user2=(cov_19b43gkacq.s[12]++,_interopRequireDefault(_user));var _cookieParser=(cov_19b43gkacq.s[13]++,require('cookie-parser'));var _cookieParser2=(cov_19b43gkacq.s[14]++,_interopRequireDefault(_cookieParser));function _interopRequireDefault(obj){cov_19b43gkacq.f[0]++;cov_19b43gkacq.s[15]++;return(cov_19b43gkacq.b[1][0]++,obj)&&(cov_19b43gkacq.b[1][1]++,obj.__esModule)?(cov_19b43gkacq.b[0][0]++,obj):(cov_19b43gkacq.b[0][1]++,{default:obj});}var pool=(cov_19b43gkacq.s[16]++,_user2.default.pool);var secret=(cov_19b43gkacq.s[17]++,_user2.default.secret);var app=(cov_19b43gkacq.s[18]++,(0,_express2.default)());cov_19b43gkacq.s[19]++;app.use(_bodyParser2.default.json());cov_19b43gkacq.s[20]++;app.use(_bodyParser2.default.urlencoded({extended:false}));cov_19b43gkacq.s[21]++;app.use(_bodyParser2.default.text());cov_19b43gkacq.s[22]++;app.use(_bodyParser2.default.json({type:'application/json'}));cov_19b43gkacq.s[23]++;app.use((0,_cookieParser2.default)());cov_19b43gkacq.s[24]++;var logIn=function logIn(req,res,next){cov_19b43gkacq.f[1]++;var _req$body=(cov_19b43gkacq.s[25]++,req.body),email=(cov_19b43gkacq.s[26]++,_req$body.email),password=(cov_19b43gkacq.s[27]++,_req$body.password);cov_19b43gkacq.s[28]++;if((cov_19b43gkacq.b[3][0]++,email==='')||(cov_19b43gkacq.b[3][1]++,password==='')){cov_19b43gkacq.b[2][0]++;cov_19b43gkacq.s[29]++;return res.status(400).json({success:'false',message:'All fields are required'});}else{cov_19b43gkacq.b[2][1]++;}cov_19b43gkacq.s[30]++;pool.query('SELECT username, answers, password FROM users WHERE (email = $1)',[email],function(err,result){cov_19b43gkacq.f[2]++;cov_19b43gkacq.s[31]++;if(typeof result.rows[0]!=='undefined'){cov_19b43gkacq.b[4][0]++;cov_19b43gkacq.s[32]++;_bcryptjs2.default.compare(password,result.rows[0].password,function(err,response){cov_19b43gkacq.f[3]++;cov_19b43gkacq.s[33]++;if(err){cov_19b43gkacq.b[5][0]++;cov_19b43gkacq.s[34]++;return res.status(404).json({success:'false',message:'Invalid email or password'});}else{cov_19b43gkacq.b[5][1]++;}cov_19b43gkacq.s[35]++;if(response){cov_19b43gkacq.b[6][0]++;var token=(cov_19b43gkacq.s[36]++,_jsonwebtoken2.default.sign({email:email,password:result.rows[0].password},secret,{expiresIn:'1h'}));cov_19b43gkacq.s[37]++;res.cookie("username",result.rows[0].username);cov_19b43gkacq.s[38]++;res.cookie("token",token);cov_19b43gkacq.s[39]++;res.cookie("answers",result.rows[0].answers);// res.redirect('localhost:5000/userpage.html')
cov_19b43gkacq.s[40]++;return res.status(200).json({success:'true',message:'Auth successful',token:token});}else{cov_19b43gkacq.b[6][1]++;cov_19b43gkacq.s[41]++;return res.status(404).json({success:'false',message:'Invalid email or password'});}});}else{cov_19b43gkacq.b[4][1]++;cov_19b43gkacq.s[42]++;return res.status(404).json({success:'false',message:'Invalid email or password'});}});};cov_19b43gkacq.s[43]++;exports.default=logIn;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ0luLmpzIl0sIm5hbWVzIjpbInBvb2wiLCJ1c2VyIiwic2VjcmV0IiwiYXBwIiwidXNlIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJ0ZXh0IiwidHlwZSIsImxvZ0luIiwicmVxIiwicmVzIiwibmV4dCIsImJvZHkiLCJlbWFpbCIsInBhc3N3b3JkIiwic3RhdHVzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJxdWVyeSIsImVyciIsInJlc3VsdCIsInJvd3MiLCJiY3J5cHQiLCJjb21wYXJlIiwicmVzcG9uc2UiLCJ0b2tlbiIsImp3dCIsInNpZ24iLCJleHBpcmVzSW4iLCJjb29raWUiLCJ1c2VybmFtZSIsImFuc3dlcnMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNQSxPQUFPQyxlQUFLRCxJQUFsQjtBQUNBLElBQU1FLFNBQVNELGVBQUtDLE1BQXBCOztBQUVBLElBQU1DLE1BQU0sd0JBQVo7O0FBRUFBLElBQUlDLEdBQUosQ0FBUUMscUJBQVdDLElBQVgsRUFBUjtBQUNBSCxJQUFJQyxHQUFKLENBQVFDLHFCQUFXRSxVQUFYLENBQXNCLEVBQUVDLFVBQVUsS0FBWixFQUF0QixDQUFSO0FBQ0FMLElBQUlDLEdBQUosQ0FBUUMscUJBQVdJLElBQVgsRUFBUjtBQUNBTixJQUFJQyxHQUFKLENBQVFDLHFCQUFXQyxJQUFYLENBQWdCLEVBQUVJLE1BQU0sa0JBQVIsRUFBaEIsQ0FBUjtBQUNBUCxJQUFJQyxHQUFKLENBQVEsNkJBQVI7O0FBR0EsSUFBTU8sUUFBUSxTQUFSQSxLQUFRLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEVBQW9CO0FBQUEsb0JBRURGLElBQUlHLElBRkg7QUFBQSxRQUVyQkMsS0FGcUIsYUFFckJBLEtBRnFCO0FBQUEsUUFFZEMsUUFGYyxhQUVkQSxRQUZjOzs7QUFJMUIsUUFBR0QsVUFBVSxFQUFWLElBQWdCQyxhQUFhLEVBQWhDLEVBQW1DO0FBQy9CLGVBQU9KLElBQUlLLE1BQUosQ0FBVyxHQUFYLEVBQWdCWixJQUFoQixDQUFxQjtBQUN4QmEsNEJBRHdCO0FBRXhCQztBQUZ3QixTQUFyQixDQUFQO0FBSUg7O0FBRUxwQixTQUFLcUIsS0FBTCxDQUFXLGtFQUFYLEVBQStFLENBQUNMLEtBQUQsQ0FBL0UsRUFBd0YsVUFBQ00sR0FBRCxFQUFNQyxNQUFOLEVBQWlCOztBQUVqRyxZQUFHLE9BQU9BLE9BQU9DLElBQVAsQ0FBWSxDQUFaLENBQVAsS0FBMkIsV0FBOUIsRUFBMEM7O0FBRXRDQywrQkFBT0MsT0FBUCxDQUFlVCxRQUFmLEVBQXlCTSxPQUFPQyxJQUFQLENBQVksQ0FBWixFQUFlUCxRQUF4QyxFQUFrRCxVQUFDSyxHQUFELEVBQU1LLFFBQU4sRUFBbUI7QUFDakUsb0JBQUdMLEdBQUgsRUFBTztBQUNILDJCQUFPVCxJQUFJSyxNQUFKLENBQVcsR0FBWCxFQUFnQlosSUFBaEIsQ0FBcUI7QUFDeEJhLHdDQUR3QjtBQUV4QkM7QUFGd0IscUJBQXJCLENBQVA7QUFJSDtBQUNELG9CQUFHTyxRQUFILEVBQVk7QUFDUix3QkFBTUMsUUFBUUMsdUJBQUlDLElBQUosQ0FBUztBQUNuQmQsK0JBQU9BLEtBRFk7QUFFbkJDLGtDQUFVTSxPQUFPQyxJQUFQLENBQVksQ0FBWixFQUFlUDtBQUZOLHFCQUFULEVBSWRmLE1BSmMsRUFLZDtBQUNJNkI7QUFESixxQkFMYyxDQUFkOztBQVVKbEIsd0JBQUltQixNQUFKLENBQVcsVUFBWCxFQUF1QlQsT0FBT0MsSUFBUCxDQUFZLENBQVosRUFBZVMsUUFBdEM7QUFDQXBCLHdCQUFJbUIsTUFBSixDQUFXLE9BQVgsRUFBb0JKLEtBQXBCO0FBQ0FmLHdCQUFJbUIsTUFBSixDQUFXLFNBQVgsRUFBc0JULE9BQU9DLElBQVAsQ0FBWSxDQUFaLEVBQWVVLE9BQXJDOztBQUVPO0FBQ1AsMkJBQU9yQixJQUFJSyxNQUFKLENBQVcsR0FBWCxFQUFnQlosSUFBaEIsQ0FBcUI7QUFDcEJhLHVDQURvQjtBQUVwQkMsa0RBRm9CO0FBR3BCUSwrQkFBT0E7QUFIYSxxQkFBckIsQ0FBUDtBQU1DLGlCQXRCRCxNQXNCSztBQUNELDJCQUFPZixJQUFJSyxNQUFKLENBQVcsR0FBWCxFQUFnQlosSUFBaEIsQ0FBcUI7QUFDNUJhLHdDQUQ0QjtBQUU1QkM7QUFGNEIscUJBQXJCLENBQVA7QUFJUDtBQUNBLGFBbkNEO0FBb0NILFNBdENELE1Bc0NLO0FBQ0QsbUJBQU9QLElBQUlLLE1BQUosQ0FBVyxHQUFYLEVBQWdCWixJQUFoQixDQUFxQjtBQUM1QmEsZ0NBRDRCO0FBRTVCQztBQUY0QixhQUFyQixDQUFQO0FBSVA7QUFFQSxLQS9DTDtBQWtESCxDQTdERDs7a0JBK0RlVCxLIiwiZmlsZSI6ImxvZ0luLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3NhbWkvRG9jdW1lbnRzL2VsaW50LXJldHJhY2VkL2dpdGh1YjEwMS9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGcgZnJvbSAncGcnO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XHJcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gJ2JvZHktcGFyc2VyJztcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgdXNlciBmcm9tICcuL3VzZXInO1xyXG5pbXBvcnQgY29va2llUGFyc2VyIGZyb20gJ2Nvb2tpZS1wYXJzZXInO1xyXG5cclxuY29uc3QgcG9vbCA9IHVzZXIucG9vbDtcclxuY29uc3Qgc2VjcmV0ID0gdXNlci5zZWNyZXQ7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcblxyXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xyXG5hcHAudXNlKGJvZHlQYXJzZXIudGV4dCgpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbid9KSk7IFxyXG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcclxuXHJcblxyXG5jb25zdCBsb2dJbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG5cclxuICAgICAgICBsZXQge2VtYWlsLCBwYXNzd29yZH0gPSAocmVxLmJvZHkpO1xyXG5cclxuICAgICAgICBpZihlbWFpbCA9PT0gJycgfHwgcGFzc3dvcmQgPT09ICcnKXtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGBmYWxzZWAsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWRgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIHBvb2wucXVlcnkoJ1NFTEVDVCB1c2VybmFtZSwgYW5zd2VycywgcGFzc3dvcmQgRlJPTSB1c2VycyBXSEVSRSAoZW1haWwgPSAkMSknLCBbZW1haWxdLCAoZXJyLCByZXN1bHQpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGlmKHR5cGVvZihyZXN1bHQucm93c1swXSkgIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgcmVzdWx0LnJvd3NbMF0ucGFzc3dvcmQsIChlcnIsIHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGBmYWxzZWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcmVzdWx0LnJvd3NbMF0ucGFzc3dvcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3JldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiBgMWhgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJ1c2VybmFtZVwiLCByZXN1bHQucm93c1swXS51c2VybmFtZSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJ0b2tlblwiLCB0b2tlbik7IFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5jb29raWUoXCJhbnN3ZXJzXCIsIHJlc3VsdC5yb3dzWzBdLmFuc3dlcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcy5yZWRpcmVjdCgnbG9jYWxob3N0OjUwMDAvdXNlcnBhZ2UuaHRtbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGB0cnVlYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBBdXRoIHN1Y2Nlc3NmdWxgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogYGZhbHNlYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRgXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBgZmFsc2VgLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgZW1haWwgb3IgcGFzc3dvcmRgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsb2dJbjtcclxuIl19